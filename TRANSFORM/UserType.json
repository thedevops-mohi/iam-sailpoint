{
    "version": 1,
    "var_self": {
        "type": "TRANSFORM",
        "id": "ab54ae28-ef5a-4ba2-b152-d237956744f3",
        "name": "UserType"
    },
    "object": {
        "id": "ab54ae28-ef5a-4ba2-b152-d237956744f3",
        "name": "UserType",
        "type": "static",
        "attributes": {
            "hasSnowApiAccount": {
                "type": "conditional",
                "attributes": {
                    "expression": "$hasSnowApiAccount eq null",
                    "positiveCondition": "false",
                    "negativeCondition": "true",
                    "hasSnowApiAccount": {
                        "type": "firstValid",
                        "attributes": {
                            "values": [
                                {
                                    "type": "accountAttribute",
                                    "attributes": {
                                        "sourceName": "ServiceNowAPI",
                                        "attributeName": "id"
                                    }
                                },
                                "null"
                            ]
                        }
                    }
                }
            },
            "snowAPIuserType": {
                "type": "firstValid",
                "attributes": {
                    "values": [
                        {
                            "type": "accountAttribute",
                            "attributes": {
                                "sourceName": "ServiceNowAPI",
                                "attributeName": "userType"
                            }
                        },
                        "NoSNAPIUserType"
                    ]
                }
            },
            "snowAPIafterConvUserType": {
                "type": "firstValid",
                "attributes": {
                    "values": [
                        {
                            "type": "accountAttribute",
                            "attributes": {
                                "sourceName": "ServiceNowAPI",
                                "attributeName": "afterConversionUserType"
                            }
                        },
                        "NOafterConversionUserType"
                    ]
                }
            },
            "snowAPIConvDateReached": {
                "type": "firstValid",
                "attributes": {
                    "values": [
                        {
                            "type": "dateCompare",
                            "attributes": {
                                "firstDate": {
                                    "type": "dateFormat",
                                    "attributes": {
                                        "input": {
                                            "type": "accountAttribute",
                                            "attributes": {
                                                "sourceName": "ServiceNowAPI",
                                                "attributeName": "conversionDate"
                                            }
                                        },
                                        "inputFormat": "yyyy-MM-dd'T'-HH:mm:ss:SSS-HH:mm",
                                        "outputFormat": "ISO8601"
                                    }
                                },
                                "secondDate": "now",
                                "operator": "lte",
                                "positiveCondition": "true",
                                "negativeCondition": "false"
                            }
                        },
                        "false"
                    ]
                }
            },
            "hasAdvisorAccount": {
                "type": "conditional",
                "attributes": {
                    "expression": "$hasAdvisorAccount eq null",
                    "positiveCondition": "false",
                    "negativeCondition": "true",
                    "hasAdvisorAccount": {
                        "type": "firstValid",
                        "attributes": {
                            "values": [
                                {
                                    "type": "accountAttribute",
                                    "attributes": {
                                        "sourceName": "Advisors - SIS Feed",
                                        "attributeName": "SIS-ID"
                                    }
                                },
                                "null"
                            ]
                        }
                    }
                }
            },
            "value": "#if($hasSnowApiAccount == 'true' && $snowAPIConvDateReached == 'false')$snowAPIuserType#elseif($hasSnowApiAccount == 'true' && $snowAPIConvDateReached == 'true')$snowAPIafterConvUserType#elseif($hasAdvisorAccount == 'true')Advisor#{else}undefined#end"
        },
        "internal": false
    }
}